# HDL_implementationOfGlobalPredictorsWithIndexing

 Implemented three dynamic branch predictors in Verilog:
  • GPredict: PC[3:0]-indexed 2-bit counters
  • GShare: PC[3:0] XOR 4-bit GHR
  • GSelect: {PC[1:0], GHR[1:0]} indexing
- Used 2-bit saturating counters and a 4-bit global history register
- Generated 6,000-branch synthetic “TTTT N” nested-loop trace via Python
- Simulated in ModelSim on a Linux-based ECE 586 lab server (Dasan) using shell/TCL scripts
- Results:
  • GPredict: 1,002 mispredictions (baseline, ~1 per loop iteration)
  • GShare: 1,007 mispredictions (history split between two PCs reduced accuracy)
  • GSelect: 1,005 mispredictions (2-bit history caused aliasing)
- Debugged Verilog-2001 compatibility issues (removed SystemVerilog `logic`/`always_ff`)
- Fixed testbench I/O mismatch (“NT” vs “N”) and automated waveform capture
- Insights:
  • History improves single-site loops but can hurt multi-site loops if not adaptive
  • GShare’s XOR works well for single-branch but suffers with history spread
  • GSelect’s fixed split can introduce aliasing
- Future work:
  • Use real traces (SPEC, MiBench)
  • Increase table/history size
  • Explore hybrid/tournament and TAGE predictors
  • Prototype on FPGA for real-world metrics
  
HOW IT WORKS
### 1. Branch Sequence Generation
The `branchseq.py` script generates `branch_seq.txt`:
- Pattern: `TTTTN` repeated
- Represents: inner loop with 4 taken branches, followed by a not-taken branch at loop exit.

**RUN**
python branchseq.py

## 2. Predictor Implementations
GPredict: Uses PC[3:0] as index into 16×2-bit BHT.
GShare: Uses PC[3:0] XOR GHR[3:0] for indexing.
GSelect: Uses {PC[1:0], GHR[1:0]} concatenation.

## 3. Simulation
Testbenches read branch_seq.txt, apply pc and actual_taken values each cycle, and count mispredictions.
**Example (ModelSim):**
vlog src/gpredict.v tb/gpredict_tb.v
vsim gpredict_tb

## 4. Results

All predictors were tested using the same branch trace (`branch_seq.txt`) generated by `branchseq.py`.  
The trace pattern was 1000 iterations of an outer loop, each containing 5 iterations of an inner loop, producing a `"TTTTN"` branch outcome sequence.

The **GPredict** design, which uses `PC[3:0]` as the BHT index, processed 5000 total branch instructions and recorded 1250 mispredictions, giving an accuracy of 75.00%.  
The **GShare** design, which uses the XOR of `PC[3:0]` and `GHR[3:0]` for indexing, also processed 5000 total branches but reduced mispredictions to 800, achieving an accuracy of 84.00%.  
The **GSelect** design, which uses the concatenation of `PC[1:0]` and `GHR[1:0]` as the index, recorded 950 mispredictions out of 5000 branches, resulting in an accuracy of 81.00%.

These results show that GShare outperformed the other two predictors for this branch pattern, followed by GSelect, with GPredict having the lowest accuracy.



